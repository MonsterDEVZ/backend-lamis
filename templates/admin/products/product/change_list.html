{% extends "admin/change_list.html" %} {% load i18n admin_urls static admin_list
jazzmin %} {% block result_list %} {% if cl.result_count %}
<style>
  .variation-actions {
    display: flex;
    gap: 10px;
    margin: 0 0 15px 0;
    padding: 12px 15px;
    background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
    border-radius: 6px;
    border: 1px solid #dee2e6;
    align-items: center;
    flex-wrap: wrap;
  }
  .variation-actions .action-label {
    font-weight: 600;
    color: #495057;
    margin-right: 10px;
    font-size: 14px;
  }
  .variation-actions button {
    padding: 8px 16px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-weight: 500;
    font-size: 13px;
    transition: all 0.2s ease;
  }
  .variation-actions .btn-group-var {
    background: linear-gradient(135deg, #28a745 0%, #218838 100%);
    color: white;
  }
  .variation-actions .btn-group-var:hover {
    opacity: 90%;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
  }
  .variation-actions .btn-ungroup {
    background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);
    color: white;
  }
  .variation-actions .btn-ungroup:hover {
    opacity: 90%;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
  }
</style>
<div class="variation-actions">
  <span class="action-label">Действия с вариациями:</span>
  <button
    type="button"
    class="btn-group-var"
    onclick="submitVariationAction('set_same_color_group')"
  >
    Объединить в группу вариаций
  </button>
  <button
    type="button"
    class="btn-ungroup"
    onclick="submitVariationAction('clear_color_group')"
  >
    Убрать из группы вариаций
  </button>
</div>

<script>
  function submitVariationAction(action) {
    var form = document.getElementById("changelist-form");
    if (!form) {
      alert("Форма не найдена");
      return;
    }

    // Check if any items are selected
    var checkboxes = form.querySelectorAll(
      'input[name="_selected_action"]:checked'
    );
    if (checkboxes.length === 0) {
      alert("Пожалуйста, выберите хотя бы один товар.");
      return;
    }

    // Set the action
    var actionSelect = form.querySelector('select[name="action"]');
    if (actionSelect) {
      actionSelect.value = action;
    } else {
      // Create hidden input for action
      var actionInput = document.createElement("input");
      actionInput.type = "hidden";
      actionInput.name = "action";
      actionInput.value = action;
      form.appendChild(actionInput);
    }

    // Submit the form
    form.submit();
  }
</script>
{% endif %} {{ block.super }} {% endblock %}
